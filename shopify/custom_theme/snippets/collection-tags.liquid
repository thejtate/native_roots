{% if collection.all_tags.size > 0 %}

  {% comment %}Good for /collections/all collection and regular collections{% endcomment %}
  {% if collection.handle %}
    {% capture collection_url %}/collections/{{ collection.handle }}{% unless collection.sort_by == blank %}?sort_by={{ collection.sort_by }}{% endunless %}{% endcapture %}
  {% comment %}Good for automatic type collections{% endcomment %}
  {% elsif collection.current_type %}
    {% assign collection_url = collection.current_type | url_for_type | sort_by: collection.sort_by  %}
  {% comment %}Good for automatic vendor collections{% endcomment %}
  {% elsif collection.current_vendor %}
    {% assign collection_url = collection.current_vendor | url_for_vendor | sort_by: collection.sort_by %}
  {% endif %}

  {% for tag in collection.all_tags %}
    {% if current_tags contains tag %}
    	{% assign tag_selected = true %}
  	{% endif %}
  {% endfor %}
  
  		<div class="form form-types">
          <div class="form-item form-type-radio">
            <input id="alltags" type="radio" class="form-radio tags-checkboxes" name="radio" value="{{ collection_url }}" {% if tag_selected != true %}checked="checked" data-default="true"{% endif %}>
            <label for="alltags">All</label>
          </div>
          
        {% for tag in collection.all_tags %}
      	{% capture new_url %}{{ tag | link_to_tag: tag | split: 'href="' | last | split: '"' | first }}{% endcapture %}
          <div class="form-item form-type-radio">
            <input id="tag-{{ tag | handleize  }}" type="radio" class="form-radio tags-checkboxes" name="radio" value="{{ new_url }}" {% if current_tags contains tag %}checked="checked" data-default="true"{% endif %}>
            <label for="tag-{{ tag | handleize  }}">{{ tag }}</label>
          </div>

    	{% endfor %}
        </div>
  


{% endif %}

<script>
  $(function() {
    var checkboxes = $('.tags-checkboxes');
    checkboxes.filter('[data-default="true"]').prop('checked', true);
    checkboxes.bind('change', function() {
        location.href = jQuery(this).val();
      }
    );
  });
</script>
